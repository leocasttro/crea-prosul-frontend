<nav class="sidebar" [ngClass]="{ 'collapsed': isCollapsed, 'no-shadow': hasActiveItem }">
  <div class="sidebar-header">
    <button mat-icon-button (click)="toggleSidebar()" class="hamburger-btn" *ngIf="isCollapsed">
      <mat-icon>{{ isCollapsed ? 'menu_open' : 'menu' }}</mat-icon>
    </button>

    <h2>Menu</h2>
    <div class="closed-btn" *ngIf="!isCollapsed" (click)="toggleSidebar()">
      <button class="closed">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>

  <ul class="nav-list">
    <li *ngFor="let item of navItems" class="nav-item">
      <a [routerLink]="item.path" [class.active]="isNavItemActive(item.path)">
        <mat-icon class="nav-icon">{{ item.icon }}</mat-icon>
        <span *ngIf="!isCollapsed">{{ item.label }}</span>
      </a>
    </li>
  </ul>

  <div class="user-profile">
    @if (user) {
      <div class="profile-content">
        <img [src]="'/users/user.png'" alt="Foto de perfil" class="profile-image" />
        <span class="user-name" *ngIf="!isCollapsed">{{ user.username || 'Usuário' }}</span>
        <button mat-button color="primary" (click)="logout()" class="logout-btn">
          <mat-icon>logout</mat-icon>
        </button>
      </div>
    } @else {
      <p *ngIf="!isCollapsed">Usuário não autenticado</p>
      <a [routerLink]="['/login']" class="login-link">
        <i class="material-icons">login</i>
      </a>
    }
  </div>
</nav>
